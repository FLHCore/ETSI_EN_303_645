## 5.6 - 最小化暴露的攻擊面 (MINIMISE EXPOSED ATTACK SURFACES)

### 條款 5.6-4 (Provision 5.6-4)

若除錯介面 (debug interface) 在實體上是可存取的，則必須透過軟體將其停用。

#### 最低要求 (Minimum Requirements)

* 所有除錯介面必須被停用；這僅能透過**軟體停用**的方式達成。

#### 佐證證據 (Supporting Evidence)

* 開發商應提供證據（例如：配置截圖、連線失敗嘗試等），顯示除錯介面已在設備上被停用。

#### 評估 (Assessment)

* 評估人員將檢查除錯介面是否確認已在設備上被停用。

---

### 開發者深度導讀 (針對 Gateway / App / Cloud 開發商)

#### 本章節核心要求與意涵

本條款是 **Provision 7.6-1 (實體移除)** 的**軟體補強措施**。

1.  **實體 vs 軟體**：
    * 有些情況下，硬體上的 UART/JTAG 測試點可能無法完全移除（例如：為了維修 RMA 需求，或者與 GPIO 共用腳位）。
    * 在這種「實體介面仍存在」的情況下，**軟體層級的封鎖 (Logical Disabling)** 就變成強制要求。
2.  **什麼是「軟體停用」？**
    * 當有人接上 UART 線材並開啟電源時，終端機 (Terminal) 應該是**靜默的 (Silent)**，不顯示 Boot Log，也不接受任何鍵盤輸入。
    * 針對 JTAG，SoC 內部的 JTAG Controller 應該被關閉（如透過暫存器設定或 eFuse），使得 JTAG 探針無法 Halt CPU 或讀取記憶體。

#### 具體落地實現方案建議

* **系統設計與 Bootloader 設定**：
    * **U-Boot 靜默模式**：
        * 設定環境變數 `silent=1`。
        * 設定 `bootdelay=-2`（禁止按鍵中斷進入 Shell）。
    * **Linux Kernel Cmdline**：
        * 移除 `console=ttyS0,115200` 相關參數，將 Console 導向 `null`。
    * **Getty 服務停用**：
        * 檢查 `/etc/inittab` 或 systemd 設定，註解掉 `ttyS0::respawn:/sbin/getty -L ttyS0 115200 vt100` 這類啟動登入 Shell 的指令。

* **證據收集策略**：
    * **連線失敗截圖 (最關鍵)**：
        * QA 接上 UART 線，使用 PuTTY 或 Minicom 開啟對應的 COM Port。
        * 設備開機。
        * **截圖**：PuTTY 視窗維持**全黑**，或者顯示無法連線/亂碼。
    * **設定檔截圖**：
        * 截取 U-Boot 環境變數列表 (`printenv`)，顯示 `silent=1`。
        * 截取 `/proc/cmdline`，顯示沒有 serial console 的設定。

* **測試與驗證**：
    * **互動測試**：
        * 在開機過程中瘋狂按 `Ctrl+C`, `Enter`, `ESC`。
        * 確認系統不會因此中斷開機流程進入 Bootloader Shell。
    * **JTAG 掃描**：
        * 使用 J-Link 或 OpenOCD 嘗試連接。
        * 確認工具回報 "TAP not found" 或 "Connection failed"。

---
[回到 5.6 Minimise Exposed Attack Surfaces](./5.6-minimise-exposed-attack-surfaces.md)