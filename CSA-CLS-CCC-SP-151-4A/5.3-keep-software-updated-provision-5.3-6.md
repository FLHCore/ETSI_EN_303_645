## 5.3 – 保持軟體更新 (KEEP SOFTWARE UPDATED)

### [此條款僅對非 ISP 管理的設備為強制性] 條款 5.3-6 (Provision 5.3-6)

若家庭閘道器 (HG) 不是由 ISP 管理的設備（即市售零售版），且支援更新功能，則此功能必須**預設啟用 (enabled by default)**，並可由使用者進行設定，包括將其**停用**與設定**自動化**。

#### 最低要求 (Minimum Requirements)

* 設備必須具備**自動更新 (auto-update)** 功能，且該功能必須**預設啟用**。
* 使用者必須有能力針對所有更新機制設定**停用 (deactivation)** 與**自動化 (automation)**。

#### 佐證證據 (Supporting Evidence)

* 開發商應提供證據（例如：設備 GUI 的截圖或影片、產品文件等），顯示設備具備自動更新功能且**預設啟用**。
* 開發商亦應提供證據（例如：設備 GUI 的截圖或影片、產品文件、使用者手冊等），顯示設備可以設定所有更新功能的停用與自動化。

#### 評估 (Assessment)

* 評估人員將檢查設備是否具備自動更新功能且預設啟用，並檢查是否提供說明給使用者，解釋如何設定及停用更新功能。
* 評估人員將檢查設備是否能設定所有更新功能的停用與自動化。

---

### 開發者深度導讀 (針對 Gateway / App / Cloud 開發商)

#### 本章節核心要求與意涵

本條款針對的是**一般市售 (Retail)** 的路由器或智慧家庭閘道器。與 ISP 專用機不同，這裡強調的是「預設安全」與「使用者自主權」的平衡。

1.  **預設安全 (Secure by Default)**：
    * 歷史經驗告訴我們，絕大多數消費者買了路由器回家設定好後，就再也不會登入後台。如果自動更新預設是關閉的，這些設備將永遠不會修補漏洞，成為殭屍網路 (Botnet) 的溫床。因此，**出廠狀態必須是 Auto-Update = ON**。
2.  **使用者自主權 (User Choice)**：
    * 雖然為了安全要預設開啟，但不能像 ISP 設備那樣強制執行。使用者可能因為網路流量限制、穩定性考量（怕更新後當機）而希望手動控制。系統必須提供「關閉」的選項。

#### 具體落地實現方案建議

* **系統設計與 UI 調整**：
    * **出廠預設值設定**：
        * 在 Firmware 的 Default Configuration (如 `uci` defaults, NVRAM default) 中，將 `auto_update_enable` 設為 `1` (True)。
    * **排程機制 (Scheduling)**：
        * 所謂的「自動化」，通常不建議偵測到更新就立刻重開機（這會斷網）。建議實作「維護時段 (Maintenance Window)」邏輯，例如預設在凌晨 03:00 - 05:00 檢查並安裝更新。
    * **UI 選項設計**：
        * 應提供一個清晰的 Toggle Switch（開關）。
        * 文字標示：「自動保持最新版本（推薦）」 -> 預設勾選。
        * 允許使用者自訂檢查頻率或安裝時間（非強制，但為佳作）。

* **證據收集策略**：
    * **OOBE (Out-Of-Box Experience) 截圖**：
        * 執行 Factory Reset。
        * 首次登入管理介面，直接導航至「韌體更新」頁面。
        * 截圖證明「自動更新」的開關是 **ON** 的狀態。
    * **手動關閉截圖**：
        * 將開關切換為 **OFF**，截圖證明使用者確實有權限將其關閉。

* **測試與驗證**：
    * **恢復原廠設定測試**：QA 必須驗證，無論使用者之前如何設定，只要按下 Reset 鍵恢復原廠，自動更新功能必須回到「開啟」狀態。
    * **自動化功能驗證**：在測試環境架設模擬的 Update Server，放置新版韌體，將設備時間調快或等待排程觸發，確認設備在無人操作下能自動下載並更新。

---
[回到 5.3 – 保持軟體更新 (KEEP SOFTWARE UPDATED)](./5.3-keep-software-updated.md)
