## 5.3 – 保持軟體更新 (KEEP SOFTWARE UPDATED)

### [此條款僅對 ISP 管理的設備為強制性] 條款 7.3-4 (Provision 7.3-4)

若家庭閘道器 (HG) 為 ISP 管理的設備，更新必須按照 ISP 管理員的要求提供，且該機制必須對受服務的使用者 (served user) 是透明的。

#### 最低要求 (Minimum Requirements)

* 設備必須具備**遠端 ISP 管理更新服務**，該服務可由 ISP 管理員依需求進行設定。
* ISP 管理更新服務必須**預設啟用 (enabled by default)**，且無需任何本地使用者互動或設定。
* 更新程序必須對使用者是完全**透明的 (transparent)**。
* 若 ISP 管理的設備需要**遠端存取功能**（例如：TR-069 等）才能運作/操作，開發商必須取得 **IMDA 的豁免 (waiver)**。

#### 佐證證據 (Supporting Evidence)

* 開發商應提供證據（例如：截圖、ISP 網站 URL、產品文件等），證明 ISP 管理員可以設定 ISP 管理更新服務。
* 開發商應提供證據（例如：截圖、ISP 網站 URL、產品文件等），顯示 ISP 管理更新服務是**預設啟用**的，且不需要任何本地使用者互動或設定。
* 開發商應提供證據（例如：截圖、ISP 網站 URL、產品文件等），顯示設備的更新程序已提供給受服務的使用者知悉。
* 開發商應宣告遠端存取（例如：TR-069 等）是否預設為停用。
    * 若必須啟用遠端存取功能才能運作，開發商應提交從 **IMDA 取得的豁免**。

#### 評估 (Assessment)

* 評估人員將檢查設備是否具備遠端 ISP 管理更新服務，且可由 ISP 管理員依需求進行設定。
* 評估人員將檢查 ISP 管理更新服務是否預設啟用，且不需要任何本地使用者互動或設定。
* 評估人員將檢查設備的更新程序是否已提供給受服務的使用者知悉。

---

### 開發者深度導讀 (針對 Gateway / App / Cloud 開發商)

#### 本章節核心要求與意涵

本條款僅適用於**電信商客製機 (Operator Tier / ISP-issued Devices)**。若您的產品是市售零售版 (Retail)，此條款通常標示為 **N/A**。

1.  **TR-069 / TR-369 (USP) 的角色**：對於 ISP 設備，更新通常是透過 ACS (Auto Configuration Server) 觸發。這裡要求的「透明」意味著 ISP 可以在半夜靜默推送更新，而不需要使用者點擊「同意」。
2.  **IMDA 的特殊豁免機制 (Waiver)**：
    * **衝突點**：一般資安規範（如 Provision 5.5-7）通常要求「遠端管理功能 (Remote Access) 預設必須關閉」。但 ISP 設備若關閉 TR-069 就無法控管。
    * **解決方案**：IMDA 允許例外，但必須**正式申請豁免 (Waiver)**。開發商不能因為是 ISP 專案就自動假設可以預設開啟，必須出示那一紙公文。

#### 具體落地實現方案建議

* **系統設計與設定**：
    * **CWMP (CPE WAN Management Protocol) 設定**：
        * 在出廠設定檔 (Default Config) 中，預填入 ISP ACS 的 URL。
        * 確保 `PeriodicInformEnable` 為 `True`。
        * 確保相關的 Firmware Upgrade RPC 方法 (如 `Download` RPC) 已實作且測試通過。
    * **靜默更新體驗**：
        * 設計更新流程時，需考慮使用者正在使用的情境。若有流量（如正在看 Netflix），應延後重開機，或僅在特定時段（如 02:00-04:00）執行，以符合「透明但友善」的原則。

* **證據收集策略**：
    * **ACS 後台截圖**：提供 ISP 管理後台的截圖，顯示可以選取特定 CPE 並下達「Push Firmware」指令。
    * **預設設定檔 (Config Dump)**：提供設備的設定檔（如 XML 或文字檔），標示出 TR-069 相關設定是預設開啟的 (`Enable=1`)。
    * **豁免文件**：這是最關鍵的行政文件。專案經理 (PM) 需確保已向 IMDA 提交申請並獲得批准信函。

* **測試與驗證**：
    * **ACS 互通性測試**：驗證設備能正確連線至 ACS，並能接收 `Download` 指令，自動下載、驗證簽章、安裝並回報成功狀態。
    * **Reset 測試**：Factory Reset 後，設備必須能自動重新連回 ACS（Zero Touch Provisioning），證明不需要使用者介入。

---
[回到 5.3 – 保持軟體更新 (KEEP SOFTWARE UPDATED)](./5.3-keep-software-updated.md)
