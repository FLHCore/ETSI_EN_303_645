## 5.6 - 最小化暴露的攻擊面 (MINIMISE EXPOSED ATTACK SURFACES)

### 條款 7.6-2 (Provision 7.6-2)

在交付前，任何開發期間用於軟體測試與除錯的存取點 (access points)，必須被停用、鎖定或移除。

#### 最低要求 (Minimum Requirements)

* 開發商必須確保任何開發期間用於軟體測試與除錯的存取點，在交付前已從設備上停用、鎖定或移除。

#### 佐證證據 (Supporting Evidence)

* 開發商應提供產品開發流程文件，說明開發期間的軟體測試與除錯存取點是如何在交付前被停用、鎖定或移除的。

#### 評估 (Assessment)

* 評估人員將檢查產品開發流程文件，確保軟體測試與除錯存取點已被停用、鎖定或移除。

---

### 開發者深度導讀 (針對 Gateway / App / Cloud 開發商)

#### 本章節核心要求與意涵

本條款與 **7.6-1 (實體介面)** 相呼應，但聚焦於**軟體層面 (Software)** 的除錯介面。

1.  **軟體除錯的殘留風險**：
    * 開發過程中常用的工具（如 **ADB**, **gdbserver**, **Telnet**, **SSH debug mode**）如果遺留在正式版韌體中，將成為嚴重的後門。
    * 此外，為了測試方便而留下的**特權 API**（例如 `/api/debug/root_shell`）或**隱藏的 CLI 指令**，都屬於此類。
2.  **流程文件的強制性**：
    * 此條款特別要求提供「產品開發流程文件 (Product Development Process Documentation)」。這意味著您不能只是「做到了」，還必須證明這是「標準作業程序 (SOP)」的一部分，而非依靠工程師的記憶手動刪除。

#### 具體落地實現方案建議

* **系統設計與編譯設定 (Build Configuration)**：
    * **Build Flags 管理**：
        * 建立區分明確的編譯目標：`Target = Debug` vs `Target = Release`。
        * 在 `Release` Profile 中，透過 Pre-processor (`#ifdef DEBUG`) 自動移除測試程式碼。
    * **檔案系統清理**：
        * 在打包 Firmware Image 的腳本中，加入清理步驟：
          `rm -f /usr/bin/gdbserver`
          `rm -f /usr/bin/strace`
          `rm -f /sbin/telnetd`
    * **Android 系統 (若適用)**：
        * 確保 `ro.debuggable=0`。
        * 確保 `ro.secure=1`。
        * 確保 ADB (Android Debug Bridge) 預設關閉或移除。

* **證據收集策略**：
    * **SOP 文件截圖**：
        * 截取內部 Wiki 或 ISO 文件中關於 "Release Procedure" 的章節，其中應包含「關閉 Debug Port」或「移除測試工具」的檢查點 (Checkpoint)。
    * **編譯設定檔**：
        * 提供 `Makefiles`, `Kconfig`, 或 `build.gradle` 的截圖，顯示 `CONFIG_DEBUG_INFO=n` 或類似設定。

* **測試與驗證**：
    * **工具殘留檢查**：
        * QA 嘗試在 Console 執行 `gdb`, `tcpdump` (視政策而定), `strace` 等開發工具，應顯示 "Command not found"。
    * **ADB 連線測試**：
        * 透過 USB 或 TCP/IP 嘗試連接 ADB，應無法連線。