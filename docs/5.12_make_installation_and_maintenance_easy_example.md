# 範例系統：簡化智慧家庭中樞的安裝與維護

本文件旨在說明一個符合 ETSI EN 303 645「5.12 使設備的安裝和維護變得容易」規範的智慧家庭系統範例。此範例基於先前章節中使用的「SmartHome Hub Pro」（基於 Raspberry Pi CM5 硬體）及其配套的行動應用程式「SmartHome Connect」。

設計的核心目標是為非技術背景的使用者提供一個無縫、直觀且安全的設定與長期維護體驗。

---

## 1. 系統組件

*   **硬體：SmartHome Hub Pro**
    *   基於 Raspberry Pi CM5 的中樞主機。
    *   配備多色 LED 狀態指示燈。
    *   設備底部印有唯一的 QR Code，用於安全配對。
    *   提供一個隱藏式（recessed）的實體重置按鈕。
*   **軟體：SmartHome Connect App**
    *   運行於 iOS 和 Android 的行動應用程式。
    *   提供引導式的安裝精靈。
    *   作為使用者與 Hub 互動、監控和維護的主要介面。

---

## 2. 簡化的安裝流程 (Easy Installation)

使用者首次設定 SmartHome Hub Pro 的流程如下，旨在將複雜性降至最低。

| 步驟 | 使用者操作 | 系統行為與技術實現 | 使用者體驗 |
| :--- | :--- | :--- | :--- |
| **1. 硬體接線** | 將 Hub 插入電源。 | Hub 開機，LED 指示燈呈現「藍色閃爍」，表示進入配對模式。 | 直觀的燈號告知使用者設備已準備就緒。 |
| **2. App 引導** | 下載並開啟 SmartHome Connect App，點擊「新增設備」。 | App 啟動一個引導式安裝精靈，逐步指導使用者。 | 清晰的圖文說明，降低使用者的焦慮感。 |
| **3. 設備發現與驗證** | 依照 App 指示，掃描 Hub 底部的 QR Code。 | 1. App 透過藍牙低功耗（BLE）掃描附近的 Hub。<br>2. QR Code 包含設備的唯一識別碼（UUID），App 用它來驗證設備的合法性，防止中間人攻擊。<br>3. 掃描成功後，App 與 Hub 建立一個加密的 BLE 連線。 | QR Code 掃描取代了繁瑣的手動輸入，既快速又安全。 |
| **4. Wi-Fi 設定** | App 會自動偵測手機已連線的 Wi-Fi，使用者只需輸入密碼。 | App 透過加密的 BLE 通道將 Wi-Fi 的 SSID 和密碼安全地傳輸給 Hub。 | 無需使用者手動選擇網路或輸入 SSID，減少出錯機會。 |
| **5. 連線與註冊** | 等待 Hub 連線至家庭網路。 | 1. Hub 嘗試連線至 Wi-Fi。<br>2. 連線成功後，LED 指示燈變為「綠色恆亮」。<br>3. Hub 連線至雲端服務並完成註冊。<br>4. App 顯示「設定成功」畫面。 | 明確的燈號和 App 反饋讓使用者確知安裝已成功完成。 |

---

## 3. 便捷的維護設計 (Easy Maintenance)

為了讓使用者能輕鬆管理和維護設備，系統提供了以下功能：

### 3.1 狀態監控與診斷

*   **儀表板 (Dashboard):** SmartHome Connect App 的主畫面會清晰地顯示 Hub 的連線狀態（例如：「線上」、「離線」）。
*   **設備健康度:** App 內建「設備健康度」頁面，提供以下資訊：
    *   **Wi-Fi 訊號強度:** 以圖形化方式顯示，幫助使用者判斷擺放位置是否恰當。
    *   **韌體版本:** 顯示當前版本，並在有可用更新時提供一鍵更新按鈕。
    *   **連線裝置列表:** 顯示所有已配對的子設備（如感應器、智慧燈泡）的狀態。
*   **LED 狀態指示:** Hub 的 LED 燈號不僅用於安裝，也用於日常狀態指示：
    *   **綠色恆亮:** 一切正常。
    *   **黃色閃爍:** 正在進行韌體更新。
    *   **紅色恆亮:** 無法連線至網際網路。
    *   **紅色閃爍:** 硬體故障。

### 3.2 故障排除指南

當 App 偵測到 Hub 離線時，它會自動彈出一個「疑難排解」的選項。點擊後，App 會提供一個互動式的指南，例如：

1.  「請檢查 Hub 的電源線是否插好，以及 LED 燈是否亮起。」
2.  「請確認您的家用路由器運作正常。」
3.  「根據 Hub 的燈號（紅色恆亮），問題可能出在網路連線。是否需要引導您重新設定 Wi-Fi？」

### 3.3 安全的恢復原廠設定

為防止意外或惡意的重置，系統提供兩種恢復原廠設定的方式：

*   **實體按鈕:** 使用者需要用細長的物體（如迴紋針）按住隱藏式的重置按鈕 10 秒鐘。這可以防止兒童誤觸或輕易被他人重置。
*   **App 內重置:** 在 App 中執行恢復原廠設定需要輸入帳戶密碼，並通過電子郵件或簡訊進行雙因素驗證，確保只有帳戶擁有者本人才能執行此敏感操作。

### 3.4 使用者同意的診斷日誌

當使用者聯繫客服尋求幫助時，客服人員可以引導使用者在 App 中啟用「上傳診斷日誌」功能。此功能會將過去 24 小時的匿名化、非個人身份資訊的系統日誌（如連線失敗記錄、系統錯誤碼）上傳至伺服器，並綁定到特定的支援工單（Support Ticket）。此操作需要使用者明確勾選同意框，確保使用者對其資料的控制權。

---

## 4. 結論

此範例系統透過**引導式安裝精靈**、**QR Code 配對**、**清晰的狀態反饋（LED 和 App）**、**互動式故障排除**以及**安全的操作設計**，顯著降低了使用者在安裝和維護智慧家庭設備時的技術門檻和心理負擔，完全符合 ETSI EN 303 645 第 5.12 條款的要求。
